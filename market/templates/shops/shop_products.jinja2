{% extends 'shops/base_shop.jinja2' %}


{% block title %}
Продукты магазина {{ shop_prod.name }}
{% endblock %}


{% block shop_sidebar %}
  <div class="Section-column">
    <div class="Section-columnSection">
      <header class="Section-header">
        <strong class="Section-title">Навигация</strong>
      </header>
      <div class="Section-columnContent">
        <div class="NavigateProfile">
          <ul class="menu menu_vt">
            <li class="menu-item"><a class="menu-link" href="{{ url('shops:shop_detail', pk=shop_prod.pk) }}">Информация о магазине</a>
            </li>
            <li class="menu-item"><a class="menu-link" href="{{ url('shops:shop-update', pk=shop_prod.pk) }}">Редатировать информацию</a>
            </li>
            <li class="menu-item_ACTIVE menu-item"><a class="menu-link" href="#">Товары магазина</a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
{% endblock %}


{% block shop_content %}
<div class="Account-column">
  <h2 class="Section-title">Товары магазина {{ shop_prod.name }}</h2>
  <div class="Cards Cards_blog" style="margin-bottom:40px;">
    <ul class="Cards Cards_blog">
    {% for product in shop_prod.products.all() %}
      <li class="Card">
        <a class="Card-picture" href="{{ url('products:product-detail', pk=product.pk) }}" style="max-width:297px">
        {% if product.preview %}
        <img  src="{{ product.preview.url }}" alt="миникартинка товара" ></a>
        {% else %}
        Изображение товара отсутствует
        {% endif %}
        <div class="Card-content">
          <strong class="Card-title">
            <a href="{{ url('products:product-detail', pk=product.pk) }}">{{ product.name }}</a>
          </strong>
          <div class="Card-description">
            {{ product.description|wordcount }}
            {% if product.description|length > 50  %}
            {{ product.description[:45] + '...' }}
            {% endif %}
          </div>
        </div>
      </li>
    {% endfor %}
    </ul>
  </div>
</div>

{% endblock %}
